// Generated by CoffeeScript 1.6.3
(function(){var e;e={delay:function(e,t){var n;n=e.defer();t(n.resolve,1e3);return n.promise}};angular.module("nossaAgua",["ngAnimate","ngRoute"]).config(function(t,n){return t.when("/",{templateUrl:"public/views/home.html",controller:"nossaAguaCtrl",resolve:e}).when("/cantareira",{templateUrl:"public/views/home.html",controller:"cantareiraCtrl",resolve:e}).when("/alto-tiete",{templateUrl:"public/views/home.html",controller:"altoTieteCtrl",resolve:e}).when("/guarapiranga",{templateUrl:"public/views/home.html",controller:"guarapirangaCtrl",resolve:e}).when("/cotia",{templateUrl:"public/views/home.html",controller:"cotiaCtrl",resolve:e}).when("/rio-grande",{templateUrl:"public/views/home.html",controller:"rioGrandeCtrl",resolve:e}).when("/rio-claro",{templateUrl:"public/views/home.html",controller:"rioClaroCtrl",resolve:e}).otherwise({redirectTo:"/"})});angular.module("nossaAgua").run(function(e,t,n,r){e.volume="50%";e.location=t.path();r({method:"GET",url:"http://api.matheus.co/api.json"}).success(function(t,n,r,i){e.dados=t;$("#preload").delay(2e3).fadeOut(200)}).error(function(e,t,n,r){console.log("err!")});$("a").on("click",function(){$("#content").fadeOut(1e3)});e.show=function(){$("#content").fadeOut(300)};e.convert_case=function(e){return e.toLowerCase().replace(/(^| )(\w)/g,function(e){return e.toUpperCase()})};e.goTo=function(t){var n;e.data=t;e.dia=e.dados[parseInt(t,10)+parseInt(1,10)].value;n=e.dados[e.data].value;n=n.substring(0,n.length-2);n=n.replace(",",".");n=100-n;return e.volume=n};e.load=function(t){e.goTo(t);return n(function(){$("#content").fadeIn(1500);$("#water").css("top",e.volume+"%");e.water=e.volume+"%";e.porcentagem_ok=parseInt(100,10)-e.volume;return e.porcentagem=e.porcentagem_ok.toFixed(1)},0)};e.share=function(){e.sistemaOk=e.convert_case(e.sistema);e.imageUrl=encodeURIComponent(e.sistema.trim());FB.ui({method:"feed",name:"Sistema "+e.sistemaOk+" - Nossa Água São Paulo",link:"http://nossaaguasp.com/#/"+e.location,picture:"http://api.matheus.co/"+e.imageUrl+"/"+e.porcentagem+".png",caption:"Nossa Água São Paulo",description:"Acompanhe facilmente os níveis das represas que abastecem São Paulo!",message:"A represa "+e.sistemaOk+" encontra-se com "+e.porcentagem+"% do seu volume de armazenamento."})};e.shareTwitter=function(){e.popUpCenter("https://twitter.com/share?text=O atual nível do Sistema "+e.convert_case(e.sistema)+" é de "+e.porcentagem+" %25","Teste","500","500")};return e.popUpCenter=function(e,t,n,r){var i,s,o;i=screen.width/2-n/2;o=screen.height/2-r/2;s=window.open(e,t,"toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width="+n+", height="+r+", top="+o+", left="+i)}});angular.module("nossaAgua").controller("altoTieteCtrl",function(e,t,n){e.sistema="alto tietê";return e.load("4")});angular.module("nossaAgua").controller("cantareiraCtrl",function(e,t,n){e.sistema="cantareira";return e.load("0")});angular.module("nossaAgua").controller("rioGrandeCtrl",function(e,t,n){e.sistema="rio grande";return e.load("16")});angular.module("nossaAgua").controller("nossaAguaCtrl",function(e,t,n){return n(function(){e.water="50%";return t.show="show"},1e3)});angular.module("nossaAgua").controller("rioClaroCtrl",function(e,t,n){e.sistema="rio claro";return e.load("20")});angular.module("nossaAgua").controller("guarapirangaCtrl",function(e,t,n){e.sistema="guarapiranga";return e.load("8")});angular.module("nossaAgua").controller("cotiaCtrl",function(e,t,n){e.sistema="cotia";return e.load("12")})}).call(this);